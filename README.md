# Job Scheduler

A minimal job scheduling solution exposed via a web API.
To enqueue an array of numbers to be sorted in the background
and to query the state of any previously enqueued job.

The solution is designed to be able to extend at later stage and 
can be used to include various other types of Jobs.

For simplicity and to be able for the code to run without any external 
resources, the application uses in-memory database and in-memory queue.
Thus, every time an application starts, the database will start afresh.

## Architecture

1. Every new job that is received is persisted in the database.
2. The entity with the jobId is send to an in-memory queue.
3. A JmsListener listens to all messages in the Queue Topic.
4. After receiving a message, the JmsListener calls service layer with the message.
5. The service layer then completes the job and updates the database.

## Pre requisites

1. JDK 1.8 or above
2. Maven

## External Libraries

1. [Project Lombok](https://projectlombok.org/)

## Installation

To install the required jars and run unit tests

Windows:

```cmd
cd /path-to-project/
mvn clean install
```

To run without tests

```cmd
cd /path-to-project/
mvn clean install -Dmaven.test.skip=true
```

## Usage

Windows:

```cmd
cd /path-to-project/
java -jar /target/job-scheduler-0.0.1-SNAPSHOT.jar
```

## Endpoints

###
1. View all created jobs
```
http://localhost:8888/api/job-scheduler/sorting-jobs
```
Sample Response: 
```
[
    {
        "jobId": 1,
        "status": "Completed",
        "createdTime": "2020-06-18T16:43:00.733"
    },
    {
        "jobId": 2,
        "status": "Pending",
        "createdTime": "2020-06-18T16:44:00.213"
    }
]
```

###
2. Create a new sorting array job.
```
http://localhost:8888/api/job-scheduler/sorting-job
```
Request Body:
```
{
    "data": [
        1,
        4311,
        632
    ]
}
```
Sample Response: ```1``` -> AutoGenerated jobId

###
3. View details of job using jobId
```
http://localhost:8888/api/job-scheduler/sorting-job/{jobId}
```
Sample Response:
```
{
    "jobId": 1,
    "status": "Completed",
    "createdTime": "2020-06-18T16:43:00.733",
    "updatedTime": "2020-06-18T16:43:01.117",
    "durationMilliseconds": 384,
    "data": [
        1,
        632,
        4311
    ]
}
```

## Author
[Abhinav Sharma](https://github.com/abhinav82ify)
